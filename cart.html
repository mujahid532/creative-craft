<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cart</title>

    <link rel="stylesheet" href="css/cart.css">

    <!-- Boostrap  links -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">



</head>

<body>


    <header id="Home" class="page_header">

        <div class="radial-bg row m-0">

            <form class="col-md-9 c-flex ">
                <p class="mb-0"><a href="tel:+91949234100"> Phone : (+91) 949-234-1100</a>/
                    <a href="tel:+917993114206">(+91) 799-311-4206</a>
                </p> &nbsp; &nbsp;
                &nbsp;&nbsp;&nbsp;
                <p class="mb-0"><a href="mailto:creativecraftuniverse@gmail.com">
                        Email : creativecraftuniverse@gmail.com </a></p>

            </form>

            <form class="col-md-3 align-middle">
                <a href="https://www.instagram.com" target="_blank" class=""><i class="fa fa-instagram"></i></a>
                <a href="http://www.twitter.com" target="_blank" class=""><i class="fa fa-twitter"></i></a>
                <a href="https://www.facebook.com" target="_blank" class=""><i class="fa fa-facebook"></i></a>
                <a href="https://www.whatsapp.com" target="_blank" class=""><i class="fa fa-whatsapp"></i></a>

            </form>

        </div>
    </header>

    <!-- navbar start -->

    <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top navpaddingleft p-0">
        <a class="navbar-brand" href="index.html">
            <img src="images/logo bg.png" class="logo" alt="logo"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="products.html">Products</a>

                </li>
                <li class="nav-item">
                    <a class="nav-link scroll-link" href="index.html#section4">About Us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="index.html#section5">Contact Us</a>
                </li>
                <!-- <li class="nav-item iconcart">
                    <p>0</p>
                    <a class="nav-link" href="cart.html"><i class="fa fa-shopping-cart"></i></a>
                </li> -->
            </ul>

        </div>
    </nav>

    <!-- Nav End -->

    <!-- section1 -->

    <article class="container">

        <main class="text-center mt-3 mb-3">

            <h2>Shopping cart</h2>
        </main>

        <div style="overflow-x:auto;">
            <table class="center">
                <tr class="cart-pdt">


                    <th class="p-2" style="width:625px;">Product</th>
                    <th>price</th>
                    <th>Quantity</th>
                    <th>Sub Total</th>

                </tr>
            </table>
            <table class="center cart_body">

            </table>
        </div>

        <div class="main mt-3">

            <div class="row m-0 total_content">
                <div class="col-xs-6 col-md-7 text-center media_query">
                    <h5 class=" media_query">Total Price</h5>
                </div>

                <div class="col-xs-6  col-md-4 text-right">
                    <h5>&#8377; <span id="total1">250</span></h5>
                </div>
            </div>

        </div>



        <section class="section mt-4">

            <div class="row m-0 total_content">
                <div class="col-md-7 text-center">
                    <h5 class=" media_query"> Subtotal &#8377; <span id="total">0</span> </h5>
                    <h5 class=" media_query"> Shipping &#8377; 100 </h5>
                    <h5 class=" media_query">&nbsp; &nbsp; &nbsp; Total &#8377; <span class="total_amount">0</span>
                    </h5>
                </div>

                <div class="col-md-4 text-right align-center btn_font">
                    <button type="button" class="btn btn-primary btn-sm place" data-toggle="modal"
                        data-target=".bd-example-modal-lg">Place Order</button>
                    <div class="modal fade bd-example-modal-lg text-left" tabindex="-1" role="dialog"
                        aria-labelledby="myLargeModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Shipping Items</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <table class="center">
                                        <tr class="cart-pdt">
                                            <th class="p-2" style="width:400px;text-align: left;">Product</th>
                                            <th>price</th>
                                            <th>Quantity</th>
                                            <th>Sub Total</th>

                                        </tr>
                                    </table>
                                    <table class="center cart_body">

                                    </table>
                                    <section class="modaltotal mt-3">
                                        <div class="row m-0 total_content" style="height: 25px;">
                                            <div class="col-xs-6 col-md-7 text-center media_query">
                                                <p class=" media_query">Total Price</p>
                                            </div>

                                            <div class="col-xs-6  col-md-4 text-right">
                                                <p>&#8377; <span id="total2">250</span></p>
                                            </div>
                                        </div>

                                    </section>
                                </div>
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Shipping Address</h5>

                                </div>
                                <div class="modal-body">
                                    <form>
                                        <div class="form-group ">
                                            <label for="recipient-name" class="col-form-label text-left">Full
                                                Name:</label>
                                            <input type="text" class="form-control" id="recipient-name">
                                        </div>
                                        <div class="form-group">
                                            <label for="recipient-name" class="col-form-label text-left">Phone
                                                Number:</label>
                                            <input type="text" class="form-control" id="recipient-name">
                                        </div>
                                        <div class="form-group">
                                            <label for="message-text" class="col-form-label text-left">Address:</label>
                                            <textarea class="form-control" id="message-text"></textarea>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Payment Info</h5>

                                </div>

                                <div class="modal-body">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label" for="exampleCheck1">Cash on delivery</label>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="Submit" class="btn btn-primary">Place Order</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>

    </article>


    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script>

        $(document).ready(function () {
            // let quantity = 0;
            // const storage=JSON.parse(localStorage.getItem('items'));
            // if (storage==null) {
            //     console.log('empty')
            // }else{
            //     JSON.parse(localStorage.getItem('items')).map(data=>{
            //     quantity = quantity+data.quantity;
            //     });
            // }

            // $('.iconcart p').html(quantity);
            total = 0;
            cartData = '';
            if (JSON.parse(localStorage.getItem('items')) === null) {
                cartData += '<td><h1>No items found in your cart</td>'
                cartData += '<span>description</span>'
            }
            else {
                JSON.parse(localStorage.getItem('items')).map(data => {

                    cartData += '<tr><td><img src="' + data.image + '" alt="" class="img" style="width:80px; height:60px;"></td><td class="ptitle" id="' + data.id + '">' + data.title + '</td></td>';
                    cartData += '<td class="price">' + data.price + '</td>'
                    cartData += '<td class=""><button class="btn btn-default dropdown-toggle bg-light m-0" type="button" data-toggle="dropdown">' + data.quantity + '<span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 3rem;text-align: center;z-index:9999;top: -124px;"><li class="listdata">1</li><li class="listdata">2</li><li class="listdata">3</li><li class="listdata">4</li><li class="listdata">5</li><li class="listdata">6</li><li class="listdata">7</li><li class="listdata">8</li><li class="listdata">9</li> <li class="listdata">10</li>  </ul></td>'
                    //  cartData+='<td><div class="row" style="align-items:center;"> <div ><span class="quantity">'+data.quantity+'</span></div> <div class="col"><button type="button" class="fa border-0 fa-caret-up fa-lg quan_up bg-light"  aria-hidden="true" id="quan_up"> </button><br><button type="button" class="fa border-0 fa-caret-down fa-lg quan_down bg-light"  aria-hidden="true"></button><br></div></div></td>';
                    cartData += '<td><span>&#8377;' + data.price * data.quantity + '</span></td></tr>'
                    let da = data.price * data.quantity
                    total = total + da
                });

            }

            $('.cart_body').html(cartData);
            $('#total').html(total);
            $('#total1').html(total);
            $('#total2').html(total);
            $('.total_amount').html(total + 100)
        })
        $(document).ready(function () {
            items = []
            $('.listdata').click(function () {
                item = {
                    quantity: $(this).text(),
                    title: $(this).parent().parent().parent().find('.ptitle').html(),
                    id: $(this).parent().parent().parent().find('.ptitle').attr('id'),
                    price: $(this).parent().parent().parent().find('.price').html(),
                    image: $(this).parent().parent().parent().find('.img').attr('src')

                }
                const localItems = JSON.parse(localStorage.getItem("items"));
                localItems.map(data => {
                    if (item.id == data.id) {
                        data.quantity = item.quantity
                    }
                    else {
                        items.push(data)
                    }

                })
                items.push(item)
                localStorage.setItem('items', JSON.stringify(items));
                location.reload();

            })
            $('.quan_up').click(function () {
                item = {
                    title: $(this).parent().parent().parent().parent().find('.ptitle').html(),
                    image: $(this).parent().parent().parent().parent().find('.img').attr('src'),
                    price: $(this).parent().parent().parent().parent().find('.price').html(),
                    id: $(this).parent().parent().parent().parent().find('.ptitle').attr('id'),
                    quantity: $(this).parent().parent().parent().parent().find('.quantity').html(),
                }

                const localItems = JSON.parse(localStorage.getItem("items"));
                localItems.map(data => {

                    if (item.id == data.id) {
                        item.quantity = parseInt(data.quantity) + 1;
                    }
                    else {
                        items.push(data);
                    }
                }); items.push(item)
                localStorage.setItem('items', JSON.stringify(items));
                location.reload();
            });
            $('.quan_down').click(function () {
                item = {
                    title: $(this).parent().parent().parent().parent().find('.ptitle').html(),
                    image: $(this).parent().parent().parent().parent().find('.img').attr('src'),
                    price: $(this).parent().parent().parent().parent().find('.price').html(),
                    id: $(this).parent().parent().parent().parent().find('.ptitle').attr('id'),
                    quantity: $(this).parent().parent().parent().parent().find('.quantity').html(),
                }
                if (item.quantity == 1) {
                    const localItems = JSON.parse(localStorage.getItem("items"));
                    localItems.map(data => {
                        if (item.id == data.id) {
                            localStorage.removeItem('items')
                        }
                        else {
                            items.push(data)
                        }

                    })
                    localStorage.setItem('items', JSON.stringify(items));
                    location.reload();

                }
                else {
                    const localItems = JSON.parse(localStorage.getItem("items"));
                    localItems.map(data => {

                        if (item.id == data.id) {
                            item.quantity = parseInt(data.quantity) - 1;

                        }
                        else {
                            items.push(data);
                        }


                    }); items.push(item)

                    localStorage.setItem('items', JSON.stringify(items));
                    location.reload();

                }
            });
            $('.place').click(function () {
                const toggle = document.querySelector(".dropdown-toggle");
                toggle.className += " hello"
                console.log('hello')
            })

        })
    </script>
</body>

</html>